#!/bin/bash
#~~#
#description: Connects to a bluetooth device
#tags:
#- bluetooth
#- connect
#- audio
#promptables:
#- name: btdevice
#  description: the bluetooth device to which to connect.
#  type: btdevice
#
#---#
p_btdevice=$1;


# PROMPTABLE USAGE GUIDE
#
# The following variables can be used in your script below.
#
# $p_btdevice â€” the bluetooth device to which to connect.
#
# For more infomation see https://github.com/heydemo/add
#
#---#
#~~#

p_btdevice=AC:3E:B1:95:AE:2F


rfkill unblock all
bluetoothctl scan on &
scanPID=$!
# Remove device if autoremove is set
if [ "$p_btdevice_autoremove" = "true" ]; then
  echo "Removing the device..."
  bluetoothctl remove $p_btdevice
fi
sleep 1
while ! bluetoothctl trust $p_btdevice; do
  echo "Retrying..."
  sleep 1
done
bluetoothctl pair $p_btdevice
bluetoothctl connect $p_btdevice
kill $scanPID















